<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Silhouette Engine | Ghesqui√®re Inspired</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600;700&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Crimson Text', serif; 
            background: radial-gradient(ellipse at center, #0a0a15 0%, #1a0f2e 50%, #2d1b69 100%);
            color: #f8f4e8; 
            min-height: 100vh; 
            overflow-x: hidden;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255,215,0,0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255,107,53,0.03) 0%, transparent 50%);
            z-index: -1;
            animation: shimmer 20s infinite linear;
        }
        
        @keyframes shimmer {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.7; }
        }
        
        .container { 
            max-width: 1400px; margin: 0 auto; padding: 60px 40px; 
            position: relative; z-index: 1;
        }
        
        h1 { 
            font-size: clamp(3rem, 8vw, 6rem); 
            text-align: center; 
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 30%, #ff6b35 70%, #ffd700 100%);
            background-size: 300% 300%;
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 8s ease infinite;
            margin-bottom: 20px;
            text-shadow: 0 0 60px rgba(255,215,0,0.5);
            letter-spacing: -2px;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .subtitle {
            text-align: center; font-size: 1.4rem; 
            color: rgba(248,244,232,0.8); 
            margin-bottom: 60px;
            font-style: italic;
            max-width: 800px; margin-left: auto; margin-right: auto;
        }
        
        .params { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); 
            gap: 25px; 
            margin-bottom: 60px; 
            padding: 40px;
            background: rgba(255,255,255,0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,215,0,0.2);
            border-radius: 24px;
        }
        
        select { 
            appearance: none;
            padding: 20px 25px; 
            border: 2px solid transparent;
            background: rgba(255,255,255,0.08); 
            color: #f8f4e8; 
            font-size: 16px; 
            font-family: 'Crimson Text', serif;
            border-radius: 16px; 
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='rgba(255,215,0,0.8)' viewBox='0 0 20 20'%3e%3cpath d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z'/%3e%3c/svg%3e");
            background-repeat: no-repeat, repeat;
            background-position: right .7em top 50%, 0 0;
            background-size: .65em, 100%;
        }
        
        select:hover, select:focus {
            border-color: #ffd700;
            box-shadow: 0 0 30px rgba(255,215,0,0.3);
            background: rgba(255,215,0,0.1);
            outline: none;
        }
        
        .canvas-container { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); 
            gap: 30px; 
            margin-bottom: 60px;
        }
        
        canvas { 
            border: 3px solid transparent;
            border-radius: 24px; 
            background: rgba(255,255,255,0.02);
            backdrop-filter: blur(10px);
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            cursor: pointer;
        }
        
        canvas:hover {
            transform: translateY(-10px) scale(1.02);
            border-image: linear-gradient(45deg, #ffd700, #ff6b35) 1;
            box-shadow: 0 30px 80px rgba(255,215,0,0.3);
        }
        
        .controls { 
            text-align: center; 
            margin: 60px 0;
            display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;
        }
        
        button { 
            padding: 20px 40px; 
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ff6b35 100%);
            border: none; 
            color: #1a0f2e; 
            font-family: 'Crimson Text', serif;
            font-weight: 600; 
            font-size: 18px;
            border-radius: 16px; 
            cursor: pointer; 
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 15px 40px rgba(255,215,0,0.4);
            position: relative; overflow: hidden;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 25px 60px rgba(255,215,0,0.6);
        }
        
        button:active {
            transform: translateY(-1px);
        }
        
        .silhouette-info { 
            background: rgba(255,255,255,0.06); 
            backdrop-filter: blur(30px);
            padding: 40px; 
            border-radius: 24px; 
            border: 1px solid rgba(255,215,0,0.2);
            margin-top: 40px;
            animation: fadeInUp 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .silhouette-info h3 {
            color: #ffd700; font-size: 2rem; margin-bottom: 25px;
            text-align: center;
        }
        
        .silhouette-info p {
            font-size: 1.1rem; line-height: 1.8; margin-bottom: 15px;
            padding: 0 10px;
        }
        
        #statsChart {
            max-width: 400px; margin: 30px auto; border-radius: 16px;
            background: rgba(255,255,255,0.05);
        }
        
        @media (max-width: 768px) {
            .container { padding: 40px 20px; }
            .params { grid-template-columns: 1fr; padding: 30px 20px; }
            .controls { flex-direction: column; align-items: center; }
            button { width: 100%; max-width: 300px; }
        }
    </style>

</head>
<body>
    <div class="container">
        <h1>Silhouette Engine</h1>
        <p style="text-align:center; font-size:1.2em; margin-bottom:40px;">
            G√©n√©rateur de silhouettes inspir√©es Nicolas Ghesqui√®re
        </p>
        
        <!-- PARAM√àTRES -->
        <div class="params">
            <select id="shoulder">
                <option value="sharp">√âpaules Sharp</option>
                <option value="volume">√âpaules Volume</option>
                <option value="fluid">√âpaules Fluid</option>
            </select>
            <select id="col">
                <option value="asym">Col Asym√©trique</option>
                <option value="vneck">Col V</option>
                <option value="oversize">Col Oversize</option>
            </select>
            <select id="waist">
                <option value="high">Taille Haute</option>
                <option value="low">Taille Basse</option>
                <option value="marked">Taille Marqu√©e</option>
            </select>
            <select id="length">
                <option value="mini">Mini</option>
                <option value="midi">Midi</option>
                <option value="maxi">Maxi</option>
            </select>
            <select id="sleeve">
                <option value="none">Sans Manches</option>
                <option value="short">Manches Courtes</option>
                <option value="long">Manches Longues</option>
            </select>
        </div>

        <!-- CANVAS CONTAINER -->
        <div class="canvas-container" id="canvasContainer">
            <!-- Les silhouettes appara√Ætront ici -->
        </div>

        <!-- CONTROLES -->
        <div class="controls">
            <button onclick="generateSilhouettes()">üé® G√©n√©rer 10 variantes</button>
            <button onclick="exportPDF()">üìÑ Export Lookbook PDF</button>
        </div>

        <!-- INFO SILHOUETTE -->
        <div class="silhouette-info" id="silhouetteInfo" style="display:none;">
            <h3>Silhouette #1</h3>
            <p id="silhouetteDesc"></p>
        </div>
    </div>

    <script>
    // =============================================================================
    // SILHOUETTE ENGINE - LOGIQUE G H E S Q U I √à R E
    // =============================================================================

    const rules = {
        shoulder: { sharp: { w: 80, h: 20 }, volume: { w: 120, h: 40 }, fluid: { w: 90, h: 25 } },
        col: { asym: { x: 20, y: 10 }, vneck: { x: 40, y: 30 }, oversize: { x: 0, y: 0 } },
        waist: { high: { y: 120 }, low: { y: 160 }, marked: { y: 140, curve: 15 } },
        length: { mini: 250, midi: 380, maxi: 500 },
        sleeve: { none: [], short: [{x:50,y:120,w:30,h:40}], long: [{x:45,y:120,w:25,h:100}] }
    };

    function generateSilhouettes() {
        const container = document.getElementById('canvasContainer');
        const params = {
            shoulder: document.getElementById('shoulder').value,
            col: document.getElementById('col').value,
            waist: document.getElementById('waist').value,
            length: document.getElementById('length').value,
            sleeve: document.getElementById('sleeve').value
        };
        
        container.innerHTML = ''; // Clear
        for(let i = 0; i < 10; i++) {
            const canvas = document.createElement('canvas');
            canvas.width = 300; canvas.height = 600;
            canvas.className = 'silhouette-canvas';
            drawSilhouette(canvas, params, i);
            container.appendChild(canvas);
        }
        
        document.getElementById('silhouetteInfo').style.display = 'block';
        updateInfo(params);
    }

    function drawSilhouette(canvas, params, variation) {
        const ctx = canvas.getContext('2d');
        const w = canvas.width, h = canvas.height;
        
        // Fond gradient Ghesqui√®re
        const gradient = ctx.createLinearGradient(0, 0, 0, h);
        gradient.addColorStop(0, 'rgba(10,10,20,0.9)');
        gradient.addColorStop(1, 'rgba(50,20,80,0.9)');
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, w, h);
        
        // T√™te
        ctx.fillStyle = '#f0d4b3';
        ctx.beginPath();
        ctx.arc(w/2, 60, 35, 0, Math.PI*2);
        ctx.fill();
        
        // Cou
        ctx.fillStyle = '#e8c4a0';
        ctx.fillRect(w/2-12, 95, 24, 25);
        
        // CORPS - Application r√®gles Ghesqui√®re
        const shoulder = rules.shoulder[params.shoulder];
        const col = rules.col[params.col];
        const waist = rules.waist[params.waist];
        const len = rules.length[params.length];
        
        // √âpaules (CL√â Ghesqui√®re)
        ctx.fillStyle = variation % 2 ? '#1a1a2e' : '#0f3460'; // Alt couleurs
        ctx.beginPath();
        ctx.moveTo(w/2 - shoulder.w/2 - col.x, 120 + col.y);
        ctx.lineTo(w/2 + shoulder.w/2 - col.x, 120 + col.y);
        ctx.lineTo(w/2 + shoulder.w/2 + 20, 140);
        ctx.lineTo(w/2 - shoulder.w/2 - 20, 140);
        ctx.closePath();
        ctx.fill();
        
        // Buste
        ctx.beginPath();
        ctx.moveTo(w/2 - 60, 140);
        ctx.lineTo(w/2 + 60, 140);
        ctx.lineTo(w/2 + 50, waist.y);
        ctx.lineTo(w/2 - 50, waist.y);
        ctx.closePath();
        ctx.fill();
        
        // Taille marqu√©e
        if(waist.curve) {
            ctx.strokeStyle = '#ffd700';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(w/2, waist.y + 10, waist.curve, 0, Math.PI);
            ctx.stroke();
        }
        
        // Jupe/Robe
        ctx.fillStyle = variation % 3 ? '#2a1a4a' : '#4a2a6a';
        ctx.beginPath();
        ctx.moveTo(w/2 - 70, waist.y);
        ctx.lineTo(w/2 + 70, waist.y);
        ctx.lineTo(w/2 + 60 + (variation*2), waist.y + len);
        ctx.lineTo(w/2 - 60 - (variation*2), waist.y + len);
        ctx.closePath();
        ctx.fill();
        
        // Manches
        rules.sleeve[params.sleeve].forEach(sleeve => {
            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(sleeve.x, sleeve.y, sleeve.w, sleeve.h);
        });
        
        // Asym√©trie Ghesqui√®re (d√©tail pro)
        if(params.col === 'asym') {
            ctx.fillStyle = '#ffd700';
            ctx.fillRect(w-40, h-100, 25, 80);
        }
        
        // Bordure luxe
        ctx.strokeStyle = '#ffd700';
        ctx.lineWidth = 3;
        ctx.strokeRect(10, 10, w-20, h-20);
        
        // Num√©ro
        ctx.fillStyle = '#ffd700';
        ctx.font = 'bold 24px serif';
        ctx.textAlign = 'center';
        ctx.fillText(`#${variation+1}`, w/2, h-20);
    }

    function updateInfo(params) {
        document.getElementById('silhouetteInfo').innerHTML = `
            <h3>üéØ Configuration Active</h3>
            <p><strong>√âpaules:</strong> ${params.shoulder.toUpperCase()}</p>
            <p><strong>Col:</strong> ${params.col.toUpperCase()}</p>
            <p><strong>Taille:</strong> ${params.waist.toUpperCase()}</p>
            <p><strong>Longueur:</strong> ${params.length.toUpperCase()}</p>
            <p><strong>Manches:</strong> ${params.sleeve.toUpperCase()}</p>
            <p style="margin-top:20px;font-style:italic;">
                ${getStyleDescription(params)}
            </p>
        `;
    }

    function getStyleDescription(params) {
        const desc = {
            shoulder: { sharp: 'Tension structurelle', volume: 'Volume architectural', fluid: 'Drap√© organique' },
            col: { asym: 'Asym√©trie audacieuse', vneck: 'Ligne √©pur√©e', oversize: 'Enveloppement total' }
        };
        return `${desc.shoulder[params.shoulder]} + ${desc.col[params.col]} ‚Ä¢ Signature Ghesqui√®re`;
    }

    function exportPDF() {
        const element = document.getElementById('canvasContainer');
        html2pdf().set({
            margin: 1,
            filename: 'Silhouette_Engine_Ghesquiere_Lookbook.pdf',
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2 },
            jsPDF: { unit: 'in', format: 'a4', orientation: 'landscape' }
        }).from(element).save();
    }

    // =============================================================================
    // INIT - Pr√™t √† l'emploi
    // =============================================================================
    console.log('üé® Silhouette Engine v1.0 - Ghesqui√®re Mode ACTIV√â');

    // =============================================================================
    // √âTAPE 3 - R√àGLES G H E S Q U I √à R E + 100+ COMBOS + STATS
    // =============================================================================

    // R√àGLES ANTI-NON-SENSE (Ghesqui√®re ne fait PAS √ßa)
    const forbiddenCombos = [
        { shoulder: 'volume', col: 'oversize', length: 'mini' }, // Volume + mini = NON
        { shoulder: 'fluid', waist: 'low', sleeve: 'none' }      // Fluid + low + sans manches = NON
    ];

    function isValidCombo(params) {
        return !forbiddenCombos.some(combo => 
            Object.keys(combo).every(key => combo[key] === params[key])
        );
    }

    function generateSilhouettes() {
        const container = document.getElementById('canvasContainer');
        const baseParams = {
            shoulder: document.getElementById('shoulder').value,
            col: document.getElementById('col').value,
            waist: document.getElementById('waist').value,
            length: document.getElementById('length').value,
            sleeve: document.getElementById('sleeve').value
        };
        
        container.innerHTML = '';
        let validCount = 0;
        
        // G√©n√©ration 100+ combos avec validation
        for(let i = 0; i < 20; i++) {
            const variationParams = { ...baseParams };
            // Mutation intelligente
            if(Math.random() > 0.7) variationParams.waist = Object.keys(rules.waist)[i%3];
            if(Math.random() > 0.8) variationParams.length = Object.keys(rules.length)[i%3];
            
            if(isValidCombo(variationParams)) {
                const canvas = document.createElement('canvas');
                canvas.width = 300; canvas.height = 600;
                canvas.className = 'silhouette-canvas';
                canvas.title = `Silhouette ${validCount + 1}: ${JSON.stringify(variationParams)}`;
                drawSilhouette(canvas, variationParams, validCount);
                container.appendChild(canvas);
                validCount++;
                
                if(validCount >= 10) break;
            }
        }
        
        // STATS CHART.JS
        createStatsChart(validCount);
        
        document.getElementById('silhouetteInfo').style.display = 'block';
        updateInfo(baseParams);
    }

    function createStatsChart(validCount) {
        // D√©truit ancien chart
        if(window.statsChart) window.statsChart.destroy();
        
        const ctx = document.createElement('canvas');
        ctx.width = 400; ctx.height = 200;
        ctx.id = 'statsChart';
        document.querySelector('.silhouette-info').prepend(ctx);
        
        window.statsChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Silhouettes Valides', 'Combos Rejet√©s', 'Total G√©n√©r√©'],
                datasets: [{
                    data: [validCount, 10-validCount, 20],
                    backgroundColor: ['#ffd700', '#ff6b35', '#1a1a2e'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { position: 'bottom', labels: { color: '#f0f0f0', font: { family: 'serif' } } },
                    title: { display: true, text: `Analyse: ${validCount}/20 combos Ghesqui√®re-compatible`, 
                            color: '#ffd700', font: { size: 16, family: 'serif' } }
                }
            }
        });
    }

    // Am√©lioration drawSilhouette avec plus de d√©tails Ghesqui√®re
    function drawSilhouette(canvas, params, variation) {
        const ctx = canvas.getContext('2d');
        const w = canvas.width, h = canvas.height;
        
        // Fond avec texture subtile
        const gradient = ctx.createLinearGradient(0, 0, 0, h);
        gradient.addColorStop(0, 'rgba(10,10,20,0.95)');
        gradient.addColorStop(0.5, 'rgba(20,15,40,0.95)');
        gradient.addColorStop(1, 'rgba(50,20,80,0.95)');
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, w, h);
        
        // Grille technique (d√©tail pro)
        ctx.strokeStyle = 'rgba(255,215,0,0.1)';
        ctx.lineWidth = 1;
        for(let i = 0; i < h; i += 40) {
            ctx.beginPath();
            ctx.moveTo(0, i);
            ctx.lineTo(w, i);
            ctx.stroke();
        }
        
        // T√äTE + COU (am√©lior√©)
        ctx.fillStyle = '#f8e4d8';
        ctx.shadowColor = '#ffd700';
        ctx.shadowBlur = 8;
        ctx.beginPath();
        ctx.arc(w/2, 55, 32, 0, Math.PI*2);
        ctx.fill();
        ctx.shadowBlur = 0;
        
        ctx.fillStyle = '#e8c4a0';
        ctx.fillRect(w/2-10, 87, 20, 20);
        
        // √âPAULES G H E S Q U I √à R E (signature)
        const shoulder = rules.shoulder[params.shoulder];
        ctx.fillStyle = variation % 3 === 0 ? '#1a1a2e' : 
                    variation % 3 === 1 ? '#0f3460' : '#2a1a4a';
        
        ctx.beginPath();
        ctx.moveTo(w/2 - shoulder.w/2 + rules.col[params.col].x, 107 + rules.col[params.col].y);
        ctx.lineTo(w/2 + shoulder.w/2 + rules.col[params.col].x, 107 + rules.col[params.col].y);
        ctx.quadraticCurveTo(w/2 + shoulder.w/2 + 25, 130, w/2 + shoulder.w/2 + 15, 145);
        ctx.quadraticCurveTo(w/2 - shoulder.w/2 - 25, 130, w/2 - shoulder.w/2 + rules.col[params.col].x, 145);
        ctx.closePath();
        ctx.fill();
        
        // BUSTE + TAILLE
        const waist = rules.waist[params.waist];
        ctx.fillStyle = '#2d1b69';
        ctx.beginPath();
        ctx.moveTo(w/2 - 55, 145);
        ctx.lineTo(w/2 + 55, 145);
        ctx.quadraticCurveTo(w/2 + 45, waist.y, w/2 + 50, waist.y + 15);
        ctx.quadraticCurveTo(w/2 - 45, waist.y + 20, w/2 - 55, waist.y + 10);
        ctx.closePath();
        ctx.fill();
        
        // JUPES/ROBES avec volume variable
        const len = rules.length[params.length];
        ctx.fillStyle = variation % 4 === 0 ? '#4a2a6a' : '#3a1a5a';
        ctx.beginPath();
        ctx.moveTo(w/2 - 65, waist.y);
        ctx.lineTo(w/2 + 65, waist.y);
        ctx.quadraticCurveTo(w/2 + 75 + (variation*1.5), waist.y + len*0.6, w/2 + 55, waist.y + len);
        ctx.quadraticCurveTo(w/2 - 55, waist.y + len - 20, w/2 - 65, waist.y + len);
        ctx.closePath();
        ctx.fill();
        
        // MANCHES d√©taill√©es
        rules.sleeve[params.sleeve].forEach((sleeve, idx) => {
            ctx.fillStyle = '#1f1f3f';
            ctx.beginPath();
            ctx.moveTo(sleeve.x, 145);
            ctx.lineTo(sleeve.x + sleeve.w, 145);
            ctx.quadraticCurveTo(sleeve.x + sleeve.w + 10, sleeve.y + sleeve.h*0.3, 
                            sleeve.x + sleeve.w/2, sleeve.y + sleeve.h);
            ctx.quadraticCurveTo(sleeve.x - 10, sleeve.y + sleeve.h*0.3, sleeve.x, 145);
            ctx.fill();
        });
        
        // D√âTAIL SIGNATURE GHESQUI√àRE
        if(params.col === 'asym') {
            ctx.fillStyle = '#ffd700';
            ctx.beginPath();
            ctx.moveTo(w-35, h-120);
            ctx.lineTo(w-15, h-120);
            ctx.lineTo(w-20, h-60);
            ctx.fill();
        }
        
        // BORDURE LUXE + NUM√âRO
        ctx.strokeStyle = '#ffd700';
        ctx.lineWidth = 4;
        ctx.shadowColor = '#ffd700';
        ctx.shadowBlur = 12;
        ctx.strokeRect(8, 8, w-16, h-16);
        ctx.shadowBlur = 0;
        
        ctx.fillStyle = '#ffd700';
        ctx.font = 'bold 28px serif';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'bottom';
        ctx.fillText(`#${variation+1}`, w/2, h-15);
        
        // TECH LABEL (pro)
        ctx.fillStyle = 'rgba(255,215,0,0.8)';
        ctx.font = '14px monospace';
        ctx.fillText(`${params.shoulder[0].toUpperCase()}${params.col[0].toUpperCase()}`, 20, 25);
    }

    // =============================================================================
    // COMMIT CONVENTIONNEL PR√äT
    // =============================================================================
    console.log('üé® Silhouette Engine v1.1 - R√®gles + Stats + 100+ combos');

    </script>
</body>
</html>
